# üö® –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò 500 - –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°

## ‚ùó –ü–†–û–ë–õ–ï–ú–ê
–í—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ `500 (Internal Server Error)` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö Patients, Staff, Visits –ø–æ—Ç–æ–º—É —á—Ç–æ:
- **–ù–æ–≤—ã–µ –ø–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –º–æ–¥–µ–ª–∏ Django**
- **–ù–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –µ—â–µ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**

## ‚úÖ –†–ï–®–ï–ù–ò–ï (2 –º–∏–Ω—É—Ç—ã)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (Windows PowerShell)

```powershell
.\APPLY_MIGRATIONS.ps1
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π (–ª—é–±–∞—è –û–°)

```bash
cd backend

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate patients
python manage.py migrate visits
python manage.py migrate calendar
python manage.py migrate comms
python manage.py migrate billing

# –ó–∞–≥—Ä—É–∂–∞–µ–º KATO —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
python manage.py loaddata kato

cd ..
```

## üìù –ü–û–°–õ–ï –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø –ú–ò–ì–†–ê–¶–ò–ô

### 1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ API

–í —Ñ–∞–π–ª–µ `backend/apps/patients/urls.py` –Ω–∞–π–¥–∏—Ç–µ –±–ª–æ–∫:

```python
# Import Sprint 2-5 ViewSets only after migrations are applied
# Uncomment these imports after running: python manage.py migrate
# from .views import (
#     ConsentHistoryViewSet,
#     ...
```

**–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ** (—É–¥–∞–ª–∏—Ç–µ `#` –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫).

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Django

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
cd backend
python manage.py runserver
```

### 3. –û–±–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä

–ù–∞–∂–º–∏—Ç–µ `F5` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã Patients, Staff, Visits –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ –ù–æ–≤—ã–µ KZ-–ø–æ–ª—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞  
‚úÖ API endpoints –¥–ª—è –º–µ–¥–æ—Å–º–æ—Ç—Ä–æ–≤ –∏ –ø–ª–∞–Ω–æ–≤ –ª–µ—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã  

---

## ‚ö†Ô∏è –ï–°–õ–ò –û–®–ò–ë–ö–ê –û–°–¢–ê–ï–¢–°–Ø

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å:**
   ```bash
   cd backend
   python manage.py showmigrations
   ```
   –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≥–∞–ª–æ—á–∫–∏ `[X]` –Ω–∞–ø—Ä–æ—Ç–∏–≤ –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π.

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω:**
   –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ (Ctrl+C) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ.

3. **–û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞:**
   `Ctrl+Shift+Delete` ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à ‚Üí F5

---

üí° **–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏—Ç–µ `KZ_IMPLEMENTATION_GUIDE.md` –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

