# Medicine ERP - ERP/–ú–ò–° —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏–π

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è ERP/–ú–ò–° —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç—å—é —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–ª–∏–Ω–∏–∫.

## üá∞üáø Kazakhstan Market Adaptation (v1.2.0) ‚úÖ

**NEW:** –ü–æ–ª–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è —Ä—ã–Ω–∫–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞!

- ‚úÖ **–ò–ò–ù** - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º Luhn
- ‚úÖ **–ö–ê–¢–û** - –∞–¥—Ä–µ—Å–∞—Ü–∏—è –ø–æ –∞–¥–º–∏–Ω-—Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º
- ‚úÖ **–û–°–ú–°** - —Å—Ç–∞—Ç—É—Å –º–µ–¥. —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è
- ‚úÖ **–ú–µ–¥–æ—Å–º–æ—Ç—Ä—ã** - –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ/–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ
- ‚úÖ **–ü–ª–∞–Ω—ã –ª–µ—á–µ–Ω–∏—è** - —Å —ç—Ç–∞–ø–∞–º–∏ –∏ —à–∞–±–ª–æ–Ω–∞–º–∏
- ‚úÖ **Kaspi QR / Halyk Pay** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –æ–ø–ª–∞—Ç
- ‚úÖ **BeeSMS / Altel** - KZ SMS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- ‚úÖ **–ù–∞–ª–æ–≥–æ–≤—ã–µ —Å–ø—Ä–∞–≤–∫–∏** - –¥–ª—è –≤—ã—á–µ—Ç–∞
- ‚úÖ **–≠–∫—Å–ø–æ—Ä—Ç –≤ 1–°** - –¥–ª—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–∏

**üìñ –°–º. `README_KZ.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ KZ-–∞–¥–∞–ø—Ç–∞—Ü–∏–∏**

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
- üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏ (—Å –ò–ò–ù –¥–ª—è –öZ)
- ü¶∑ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É—Å–ª—É–≥ –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä
- üë®‚Äç‚öïÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º
- üí∞ –§–∏–Ω–∞–Ω—Å—ã –∏ –±–∏–ª–ª–∏–Ω–≥ (Kaspi/Halyk –¥–ª—è –öZ)
- üì¶ –°–∫–ª–∞–¥—Å–∫–æ–π —É—á—ë—Ç
- üìß –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (SMS/Email, KZ-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã)
- üìä –û—Ç—á—ë—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- üè¢ Multi-tenant (–Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π/—Ñ–∏–ª–∏–∞–ª–æ–≤)
- üè• –ú–µ–¥–æ—Å–º–æ—Ç—Ä—ã –∏ –ø–ª–∞–Ω—ã –ª–µ—á–µ–Ω–∏—è (–öZ)

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend
- Django 5
- Django REST Framework
- PostgreSQL 16
- Redis
- Celery
- Django Channels (WebSocket)
- JWT Authentication

### Frontend
- Vue 3
- Vite
- Pinia
- Naive UI
- Axios

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker
- Docker Compose
- Make (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/ukudarovv/medicine_project.git
cd medicine_project
```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
cp env.example .env
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
make build
make up
```

–ò–ª–∏ –±–µ–∑ Make:
```bash
docker-compose build
docker-compose up -d
```

4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
make migrate
```

5. –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```bash
make createsuperuser
```

6. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```bash
make seed
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- Frontend: http://localhost:5173
- Backend API: http://localhost:8000
- API Docs: http://localhost:8000/api/docs/
- Admin: http://localhost:8000/admin/

## –ö–æ–º–∞–Ω–¥—ã Makefile

- `make up` - –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- `make down` - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- `make build` - –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑—ã
- `make migrate` - –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- `make makemigrations` - –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- `make seed` - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- `make test` - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
- `make lint` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –ª–∏–Ω—Ç–µ—Ä–∞–º–∏
- `make format` - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
- `make shell` - –û—Ç–∫—Ä—ã—Ç—å Django shell
- `make logs` - –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
- `make clean` - –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ volumes

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
medicine_project/
‚îú‚îÄ‚îÄ backend/              # Django backend
‚îÇ   ‚îú‚îÄ‚îÄ apps/            # Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/        # –Ø–¥—Ä–æ (auth, permissions)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ org/         # –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ —Ñ–∏–ª–∏–∞–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ staff/       # –ü–µ—Ä—Å–æ–Ω–∞–ª
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ patients/    # –ü–∞—Ü–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # –£—Å–ª—É–≥–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar/    # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ visits/      # –í–∏–∑–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ billing/     # –§–∏–Ω–∞–Ω—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ warehouse/   # –°–∫–ª–∞–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ comms/       # –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reports/     # –û—Ç—á—ë—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ config/          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ frontend/            # Vue 3 frontend
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/         # API –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layouts/     # Layouts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/       # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stores/      # Pinia stores
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles/      # –°—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Makefile
‚îî‚îÄ‚îÄ README.md
```

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000/api/docs/

–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/v1/auth/login` - –í—Ö–æ–¥
- `POST /api/v1/auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `GET /api/v1/auth/me` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- `GET/POST /api/v1/org/branches` - –§–∏–ª–∏–∞–ª—ã
- `GET/PATCH /api/v1/org/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∏–Ω–∏–∫–∏

### –ü–µ—Ä—Å–æ–Ω–∞–ª
- `GET/POST /api/v1/staff/employees` - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏

### –ü–∞—Ü–∏–µ–Ω—Ç—ã
- `GET/POST /api/v1/patients` - –ü–∞—Ü–∏–µ–Ω—Ç—ã

### –£—Å–ª—É–≥–∏
- `GET/POST /api/v1/services` - –£—Å–ª—É–≥–∏
- `GET/POST /api/v1/services/categories` - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- `GET/POST /api/v1/calendar/appointments` - –ó–∞–ø–∏—Å–∏
- WebSocket: `ws://localhost:8001/ws/calendar?branch={id}` - Real-time —Å–æ–±—ã—Ç–∏—è

### –í–∏–∑–∏—Ç—ã
- `GET/POST /api/v1/visits` - –í–∏–∑–∏—Ç—ã

### –§–∏–Ω–∞–Ω—Å—ã
- `GET/POST /api/v1/billing/invoices` - –°—á–µ—Ç–∞
- `POST /api/v1/billing/payments` - –ü–ª–∞—Ç–µ–∂–∏

### –°–∫–ª–∞–¥
- `GET/POST /api/v1/warehouse/items` - –ú–∞—Ç–µ—Ä–∏–∞–ª—ã

### –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- `GET/POST /api/v1/comms/templates` - –®–∞–±–ª–æ–Ω—ã
- `POST /api/v1/comms/send` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

### –û—Ç—á—ë—Ç—ã
- `GET /api/v1/reports/appointments` - –û—Ç—á—ë—Ç –ø–æ –≤–∏–∑–∏—Ç–∞–º
- `GET /api/v1/reports/revenue` - –û—Ç—á—ë—Ç –ø–æ –≤—ã—Ä—É—á–∫–µ

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### Backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd backend
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
python manage.py runserver

# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
python manage.py makemigrations

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
python manage.py migrate

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
black .
isort .
ruff check --fix .
```

### Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd frontend
npm install

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è production
npm run build

# –õ–∏–Ω—Ç–∏–Ω–≥
npm run lint

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm run format
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Backend —Ç–µ—Å—Ç—ã
```bash
make test
# –∏–ª–∏
docker-compose exec backend pytest
```

### Frontend —Ç–µ—Å—Ç—ã
```bash
cd frontend
npm run test
```

### E2E —Ç–µ—Å—Ç—ã
```bash
cd frontend
npx playwright test
```

## –î–æ—Å—Ç—É–ø –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (Windows)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```powershell
.\setup_network_access.ps1
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Docker

### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–£–∑–Ω–∞–π—Ç–µ IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:**
   ```powershell
   ipconfig
   ```
   –ù–∞–π–¥–∏—Ç–µ IPv4 –∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä: `192.168.1.100`)

2. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω):
   ```bash
   copy env.example .env
   ```

3. **–î–æ–±–∞–≤—å—Ç–µ/–∏–∑–º–µ–Ω–∏—Ç–µ –≤ .env:**
   ```env
   HOST_IP=192.168.1.100  # –í–∞—à —Ä–µ–∞–ª—å–Ω—ã–π IP
   ```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç—ã –≤ Windows Firewall:**
   
   –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
   ```powershell
   New-NetFirewallRule -DisplayName "Medicine ERP Frontend" -Direction Inbound -LocalPort 5173 -Protocol TCP -Action Allow
   New-NetFirewallRule -DisplayName "Medicine ERP Backend" -Direction Inbound -LocalPort 8000 -Protocol TCP -Action Allow
   New-NetFirewallRule -DisplayName "Medicine ERP WebSocket" -Direction Inbound -LocalPort 8001 -Protocol TCP -Action Allow
   ```

5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker:**
   ```bash
   docker-compose down
   docker-compose up -d
   ```

6. **–î–æ—Å—Ç—É–ø —Å –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤:**
   
   –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ –¥—Ä—É–≥–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ:
   ```
   http://192.168.1.100:5173
   ```
   (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π IP)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

- –ö–æ–º–ø—å—é—Ç–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
- –ü–æ—Ä—Ç—ã 5173, 8000, 8001 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ
- Docker Desktop –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ "Up"

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [NETWORK_ACCESS.md](NETWORK_ACCESS.md)

## –ú–æ–¥—É–ª—å ¬´–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥¬ª

–ú–æ–¥—É–ª—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏ —Å –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏ (SMS, WhatsApp, Telegram).

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (Triggers)**
- 10 —Ç–∏–ø–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ (–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏, –ø–æ—Å–ª–µ –≤–∏–∑–∏—Ç–∞, –î–† –∏ –¥—Ä.)
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏: `_–ò–ú–Ø_–ü–ê–¶–ò–ï–ù–¢–ê_`, `_–î–ê–¢–ê_–í–ò–ó–ò–¢–ê_`, `_–°–°–´–õ–ö–ê_–ù–ê_–û–ù–õ–ê–ô–ù_–ó–ê–ü–ò–°–¨_`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—á—ë—Ç quiet-hours (22:00-08:00) –∏ opt-in/out

**–ö–∞–º–ø–∞–Ω–∏–∏**
- –ú–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ (—Ç–µ–≥–∏, —É—Å–ª—É–≥–∏, –¥–∞—Ç—ã)
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∞—Ç—á–∏–Ω–≥
- –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Excel

**–ú–µ—Ç—Ä–∏–∫–∏ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏—è**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç: –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ ‚Üí –≤–∏–∑–∏—Ç ‚Üí –≤—ã—Ä—É—á–∫–∞
- –ö–æ–Ω–≤–µ—Ä—Å–∏–æ–Ω–Ω–æ–µ –æ–∫–Ω–æ: 14 –¥–Ω–µ–π

### API Endpoints

```
GET/POST  /api/comms/marketing/reminders/      # CRUD –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
POST      /api/comms/marketing/reminders/{id}/test/    # –¢–µ—Å—Ç
PATCH     /api/comms/marketing/reminders/{id}/toggle/  # –í–∫–ª/–≤—ã–∫–ª

GET/POST  /api/comms/marketing/campaigns/      # CRUD –∫–∞–º–ø–∞–Ω–∏–π
POST      /api/comms/marketing/campaigns/{id}/prepare/   # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
POST      /api/comms/marketing/campaigns/{id}/schedule/  # –ó–∞–ø—É—Å–∫

GET       /api/comms/marketing/contact-log/    # –ñ—É—Ä–Ω–∞–ª –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
GET       /api/comms/marketing/sms-balance/    # –ë–∞–ª–∞–Ω—Å SMS
```

### Celery Tasks (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ)

- `generate_reminder_jobs` - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ 01:00
- `process_reminder_queue` - –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- `fetch_delivery_statuses` - –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- `calculate_conversions` - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ 02:00

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ .env

```bash
SMS_PROVIDER=mock
SMS_RATE_LIMIT_PER_MIN=30
SMS_PRICE_PER_SMS=15.0
ONLINE_BOOKING_URL=https://your-clinic.com/booking
QUIET_HOURS_START=22
QUIET_HOURS_END=8
ANTISPAM_WINDOW_HOURS=24
CONVERSION_WINDOW_DAYS=14
```

### –ó–∞—â–∏—Ç–∞ –∏ –ø—Ä–∞–≤–∏–ª–∞

- ‚úÖ Opt-in/out (–ø–æ–ª–µ `is_marketing_opt_in` –≤ Patient)
- ‚úÖ Quiet hours (–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–æ—á—å—é)
- ‚úÖ –ê–Ω—Ç–∏—Å–ø–∞–º (–æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ 24—á)
- ‚úÖ Rate limiting (—Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞)
- ‚úÖ Audit log (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π)

## –î–µ–ø–ª–æ–π

–°–º. [docs/deployment.md](docs/deployment.md) –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –¥–µ–ø–ª–æ—é –≤ production.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å: support@example.com

