<template>
  <div class="main-layout">
    <aside class="sidebar">
      <div class="logo">
        <h2>Medicine ERP</h2>
      </div>
      <nav class="menu">
        <router-link to="/" class="menu-item">
          ğŸ“… Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ
        </router-link>
        <router-link to="/patients" class="menu-item">
          ğŸ‘¥ ĞŸĞ°Ñ†Ğ¸ĞµĞ½Ñ‚Ñ‹
        </router-link>
        <router-link to="/services" class="menu-item">
          ğŸ¦· Ğ£ÑĞ»ÑƒĞ³Ğ¸
        </router-link>
        <router-link to="/staff" class="menu-item">
          ğŸ‘¨â€âš•ï¸ Ğ¡Ğ¾Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¸ĞºĞ¸
        </router-link>
        <router-link to="/visits" class="menu-item">
          ğŸ“‹ Ğ’Ğ¸Ğ·Ğ¸Ñ‚Ñ‹
        </router-link>
        <router-link to="/billing" class="menu-item">
          ğŸ’° Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑÑ‹
        </router-link>
        <router-link to="/warehouse" class="menu-item">
          ğŸ“¦ Ğ¡ĞºĞ»Ğ°Ğ´
        </router-link>
        <router-link to="/marketing" class="menu-item">
          ğŸ“§ ĞœĞ°Ñ€ĞºĞµÑ‚Ğ¸Ğ½Ğ³
        </router-link>
        <router-link to="/reports" class="menu-item">
          ğŸ“Š ĞÑ‚Ñ‡Ñ‘Ñ‚Ñ‹
        </router-link>
        <router-link to="/settings/clinic" class="menu-item">
          âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
        </router-link>
      </nav>
      <div class="user-section">
        <n-button text @click="handleLogout">
          ğŸšª Ğ’Ñ‹Ñ…Ğ¾Ğ´
        </n-button>
      </div>
    </aside>
    <main class="content">
      <router-view />
    </main>
  </div>
</template>

<script setup>
import { useRouter } from 'vue-router'
import { useAuthStore } from '@/stores/auth'

const router = useRouter()
const authStore = useAuthStore()

async function handleLogout() {
  await authStore.logout()
  router.push('/login')
}
</script>

<style scoped lang="scss">
@import '@/styles/tokens.scss';

.main-layout {
  display: flex;
  height: 100vh;
  overflow: hidden;
}

.sidebar {
  width: 260px;
  background: $bg-secondary;
  border-right: 1px solid $border-color;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
}

.logo {
  padding: $spacing-lg;
  border-bottom: 1px solid $border-color;
  
  h2 {
    margin: 0;
    font-size: 20px;
    color: $primary-color;
  }
}

.menu {
  flex: 1;
  padding: $spacing-md 0;
  overflow-y: auto;
}

.menu-item {
  display: block;
  padding: $spacing-md $spacing-lg;
  color: $text-secondary;
  text-decoration: none;
  transition: all $transition-fast;
  
  &:hover {
    background: $bg-tertiary;
    color: $text-primary;
    text-decoration: none;
  }
  
  &.router-link-active {
    background: $bg-tertiary;
    color: $primary-color;
    border-left: 3px solid $primary-color;
  }
}

.user-section {
  padding: $spacing-lg;
  border-top: 1px solid $border-color;
}

.content {
  flex: 1;
  overflow-y: auto;
  background: $bg-primary;
}
</style>

